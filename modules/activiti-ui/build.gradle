
import java.text.SimpleDateFormat;
import java.util.Date;

def getDateTime() {
		SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd-HHmm");
		return format.format(new Date());
}


buildscript {

    ext {
        activitiVersion = '6.0.0'
        jacksonVersion = '2.3.3'

    }
	
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:1.5.3.RELEASE")
    }
}



allprojects {
	apply plugin: 'java'
	apply plugin: 'eclipse'

  eclipse {
    classpath {
  
    }
  }
}

subprojects {
	apply plugin: 'java'
	apply plugin: 'eclipse'
	sourceCompatibility = 1.8
	targetCompatibility = 1.8

	ext {
		servletApiVersion = '3.0.1'
		springVersion = '4.1.6.RELEASE'
		currentTime = getDateTime()
	}

	tasks.withType(JavaCompile) {
		options.encoding = "UTF-8"
	}
	
	repositories {
		maven { url 'http://maven.aliyun.com/nexus/content/repositories/central/' }
		maven { url "http://www.datanucleus.org/downloads/maven2" }
		maven { url 'http://maven.ibiblio.org/maven2/' }
	    mavenCentral()
	    
	}

}


project(':activiti-app-conf') {
 	dependencies {
 		compile project(":activiti-app-logic")
 		compile project(":activiti-app-rest")
 		compile project(":content-storage-api")
 		compile project(":content-storage-fs")
 		compile project(":editor-image-generator")

        compile ("org.activiti:activiti-engine:${activitiVersion}")
		compile ("org.activiti:activiti-spring:${activitiVersion}")
		compile ("org.activiti:activiti-rest:${activitiVersion}")
		compile ("org.activiti:activiti-bpmn-model:${activitiVersion}")
		compile ("org.activiti:activiti-bpmn-converter:${activitiVersion}")
		compile ("org.activiti:activiti-json-converter:${activitiVersion}")
		compile ("org.activiti:activiti-bpmn-layout:${activitiVersion}")
		compile ("org.activiti:activiti-form-engine-configurator:${activitiVersion}")
		compile ("org.activiti:activiti-form-engine:${activitiVersion}")
		compile ("org.activiti:activiti-form-model:${activitiVersion}")
		compile ("org.activiti:activiti-form-json-converter:${activitiVersion}")
		compile ("org.activiti:activiti-dmn-engine-configurator:${activitiVersion}")
		compile ("org.activiti:activiti-dmn-engine:${activitiVersion}")
		compile ("org.activiti:activiti-dmn-model:${activitiVersion}")
		compile ("org.slf4j:slf4j-api:1.7.5")
		compile ("org.slf4j:slf4j-log4j12:1.7.5")
		compile ("org.slf4j:jcl-over-slf4j:1.7.5")
		compile ("com.fasterxml.jackson.datatype:jackson-datatype-json-org:${jacksonVersion}")
		compile ("com.fasterxml.jackson.datatype:jackson-datatype-hppc:${jacksonVersion}")
		compile ("com.fasterxml.jackson.datatype:jackson-datatype-joda:${jacksonVersion}")
		compile ("xerces:xercesImpl:2.11.0")
		compile ("org.liquibase:liquibase-core:3.1.0")
		compile ("com.mchange:c3p0.0.9.2.1")
		compile ("org.hibernate:hibernate-core:4.2.16.Final")
		compile ("org.hibernate:hibernate-entitymanager:4.2.16.Final")
		compile ("org.hibernate:hibernate-validator:5.0.2.Final")
		compile ("commons-fileupload:commons-fileupload:1.3")
		compile ("commons-io:commons-io:2.4")
		compile ("org.apache.commons:commons-lang3:3.3.2")
		compile ("javax.annotation:jsr250-api:1.0")
		compile ("javax.inject:javax.inject:1")
		compile ("javax.servlet:javax.servlet-api:3.1.0")
		compile ("javax.servlet:jstl:1.2")
		compile ("javax.validation:validation-api:1.1.0.Final")
		compile ("com.google.guava:guava:17.0")
		compile ("joda-time:joda-time:2.3")
		compile ("joda-time:joda-time-hibernate:1.3")
		compile ("org.jadira.usertype:usertype.core:3.1.0.CR10")
		compile ("org.aspectj:aspectjweaver:1.7.4")
		compile ("org.springframework:spring-aop:${springVersion}")
		compile ("org.springframework:spring-beans:${springVersion}")
		compile ("org.springframework:spring-context:${springVersion}")
		compile ("org.springframework:spring-context-support:${springVersion}")
		compile ("org.springframework:spring-core:${springVersion}")
		compile ("org.springframework:spring-expression:${springVersion}")
		compile ("org.springframework:spring-orm:${springVersion}")
		compile ("org.springframework:spring-tx:${springVersion}")
		compile ("org.springframework:spring-web:${springVersion}")
		compile ("org.springframework:spring-webmvc:${springVersion}")
		compile ("org.springframework.data:spring-data-jpa:${springVersion}")
		compile ("org.springframework.security:spring-security-core:${springVersion}")
		compile ("org.springframework.security:spring-security-config:${springVersion}")
		compile ("org.springframework.security:spring-security-crypto:${springVersion}")
		compile ("org.springframework.security:spring-security-web:${springVersion}")
		compile ("org.freemarker:freemarker:2.3.20")
		compile ("javax.mail:mail:1.4.7")
		compile ("org.apache.httpcomponents:httpclient:4.3.2")
		compile ("org.codehaus.groovy:groovy-all:2.3.5")

 	}

}

project(':activiti-app-logic') {
 	dependencies {
 		compile project(":content-storage-api")
 		compile project(":content-storage-fs")
 		compile project(":editor-image-generator")
 	}

}

project(':activiti-app-rest') {
 	dependencies {
 		compile project(":content-storage-api")
 		compile project(":content-storage-fs")
 		compile project(":editor-image-generator")
 	}

}

project(':content-storage-api') {
 	dependencies {

 	}

}

project(':content-storage-fs') {
 	dependencies {

 	}

}

project(':editor-image-generator') {
 	dependencies {

 	}

}



project(':activiti-app') {

	apply plugin: 'war'
	apply plugin: 'eclipse-wtp'
	//apply plugin: 'spring-boot'
	
	configurations {
	    providedRuntime 
	}

	jar {
	    baseName = 'activiti-app'  
	    version =  '6.0.0-' + currentTime
	}
	
	war {
	    baseName = 'activiti-app'  
	    version =  '6.0.0-' + currentTime
	}
	
	dependencies {
		compile project(":activiti-app-conf") 
		compile("mysql:mysql-connector-java:5.1.43")
		compile("com.h2database:h2:1.4.194")
	}
}

 
 
