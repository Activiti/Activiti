YAHOO.namespace("plugin","behavior");(function(){var c=YAHOO.util,a=YAHOO.util.Event,b=YAHOO.util.Dom,d=YAHOO.lang,e=YAHOO.util.Dom.get;YAHOO.Bubbling=function(){var j={},m={classname:"js"},g=null;var o=function(v,s){var w=s[1].anchor;if(!(s[1].flagged||s[1].decrepitate)&&w){var x=w.getAttribute("rel"),u=w.getAttribute("target");if((!u||(u===""))&&(x=="external")){w.setAttribute("target","blank")}}};var q=function(s,r){j.processingAction(s,r,j.defaultActions)};var h={newRef:null,oldRef:null,value:null};function k(){if(h.oldRef){j.fire("blur",{target:h.oldRef})}}function n(){if(h.newRef){j.fire("focus",{target:h.newRef,blur:h.oldRef})}}function l(){if(h.newRef){h.newValue=(h.tagName=="SELECT"?h.newRef[h.newRef.selectedIndex].value:h.newRef.value);if(h.newValue!=h.oldValue){if(YAHOO.env.ua.webkit&&(h.tagName=="SELECT")){h.newRef.setAttribute("default",h.newValue)}j.fire("change",{target:h.newRef,value:h.newValue,newValue:h.newValue,oldValue:h.oldValue,rel:h.newRef.getAttribute("rel")});h.oldValue=h.newValue}}}function i(s,r){h={oldRef:h.newRef,newRef:s,tagName:(s&&s.tagName?s.tagName.toUpperCase():null),oldValue:(s?s.value:null)};if(r=="SELECT"){h.oldValue=(YAHOO.env.ua.webkit?s.getAttribute("default"):s[s.selectedIndex].value)}}function p(u){var s,r="[INPUT][TEXTAREA][SELECT][BUTTON][A][IMG]";if(u&&(s=u.tagName.toUpperCase())){if(u.getAttribute("tabindex")||(r.indexOf("["+s+"]")!==-1)){return true}}return false}function f(u,s){var r=(u&&u.tagName?u.tagName.toUpperCase():null);if(u&&r){if(r=="OPTION"){return f(u.parentNode,s)}else{if(document.body&&(u===document.body)){l();i(null);k()}else{if((u!==h.newRef)&&p(u)){l();i(u,r);k();n()}}}}}j.ready=false;j.bubble={};j.getOwnerByClassName=function(s,r){return(b.hasClass(s,r)?s:b.getAncestorByClassName(s,r))};j.getOwnerByTagName=function(s,r){s=b.get(s);if(!s){return null}return(s.tagName&&s.tagName.toUpperCase()==r.toUpperCase()?s:b.getAncestorByTagName(s,r))};j.getAncestorByClassName=j.getOwnerByClassName;j.getAncestorByTagName=j.getOwnerByTagName;j.onKeyPressedTrigger=function(t,u,s){var r="key";u=u||a.getEvent();s=s||{};s.action=r;s.target=t.target||(u?a.getTarget(u):null);f(s.target,s);s.flagged=false;s.decrepitate=false;s.event=u;s.stop=false;s.type=t.type;s.keyCode=t.keyCode;s.charCode=t.charCode;s.ctrlKey=t.ctrlKey;s.shiftKey=t.shiftKey;s.altKey=t.altKey;this.bubble.key.fire(u,s);if(s.stop){a.stopEvent(u)}return s.stop};j.onEventTrigger=function(s,v,r){v=v||a.getEvent();var u=r=r||{};r.action=s;r.target=(v?a.getTarget(v):null);if((s=="navigate")||(s=="property")){f(r.target,r)}r.flagged=false;r.decrepitate=false;r.event=v;r.stop=false;this.bubble[s].fire(v,r);if(r.stop){a.stopEvent(v)}return r.stop};j.onNavigate=function(s){var r={anchor:this.getOwnerByTagName(a.getTarget(s),"A"),button:j.getYUIButton(a.getTarget(s))};if(r.button){r.value=r.button.get("value");r.rel=r.button._button.getAttribute("rel")}else{if(r.anchor){r.rel=r.anchor.getAttribute("rel")}else{r.input=this.getOwnerByTagName(a.getTarget(s),"INPUT");r.select=this.getOwnerByTagName(a.getTarget(s),"SELECT");if(r.input){r.value=r.input.getAttribute("value");r.rel=r.input.getAttribute("rel")}else{if(r.select){r.value=r.select[r.select.selectedIndex].value;r.rel=r.select.getAttribute("rel")}}}}if(!this.onEventTrigger("navigate",s,r)){this.onEventTrigger("god",s,r)}};j.onProperty=function(r){this.onEventTrigger("property",r,{anchor:this.getOwnerByTagName(a.getTarget(r),"A"),button:j.getYUIButton(a.getTarget(r))})};j._timeoutId=0;j.onRepaint=function(r){clearTimeout(j._timeoutId);j._timeoutId=setTimeout(function(){var t="repaint",u={target:document.body},s={action:t,target:null,event:u,flagged:false,decrepitate:false,stop:false};j.bubble[t].fire(u,s);if(s.stop){a.stopEvent(u)}},150)};j.onRollOver=function(r){this.onEventTrigger("rollover",r,{anchor:this.getOwnerByTagName(a.getTarget(r),"A")})};j.onRollOut=function(r){this.onEventTrigger("rollout",r,{anchor:this.getOwnerByTagName(a.getTarget(r),"A")})};j.onKeyPressed=function(r){this.onKeyPressedTrigger(r)};j.getActionName=function(t,x){x=x||{};var s=null,u=null,v=(b.inDocument(t)?function(r){return b.hasClass(t,r)}:function(r){return t.hasClass(r)});if(t&&(d.isObject(t)||(t=e(t)))){try{u=t.getAttribute("rel")}catch(w){}for(s in x){if((x.hasOwnProperty(s))&&(v(s)||(s===u))){return s}}}return null};j.getAllActions=function(t,y){y=y||{};var s=null,u=null,x=[],v=(b.inDocument(t)?function(r){return b.hasClass(t,r)}:function(r){return t.hasClass(r)});if(t&&(d.isObject(t)||(t=e(t)))){try{u=t.getAttribute("rel")}catch(w){}for(s in y){if((y.hasOwnProperty(s))&&(v(s)||(s===u))){x.push(s)}}}return x};j.getFirstChildByTagName=function(u,s){if(u&&(d.isObject(u)||(u=e(u)))&&s){var r=u.getElementsByTagName(s);if(r.length>0){return r[0]}}return null};j.virtualTarget=function(u,s){if(s&&(d.isObject(s)||(s=e(s)))&&d.isObject(u)){var r=a.getRelatedTarget(u);if(d.isObject(r)){while((r.parentNode)&&d.isObject(r.parentNode)&&(r.parentNode.tagName!=="BODY")){if(r.parentNode===s){return true}r=r.parentNode}}}return false};j.getYUIButton=function(s){var u=this.getOwnerByClassName(s,"yui-button"),r=null,v=null;if(d.isObject(u)&&YAHOO.widget.Button){r=YAHOO.widget.Button.getButton(u.id)}return r};j.addLayer=function(u,t){var r=false;u=(d.isArray(u)?u:[u]);t=t||window;for(var s=0;s<u.length;++s){if(u[s]&&!this.bubble.hasOwnProperty(u[s])){this.bubble[u[s]]=new c.CustomEvent(u[s],t,true);r=true}}return r};j.subscribe=function(s,r,t){var u=this.addLayer(s);if(s){if(d.isObject(t)){this.bubble[s].subscribe(r,t,true)}else{this.bubble[s].subscribe(r)}}return u};j.on=j.subscribe;j.fire=function(r,s){s=s||{};s.action=r;s.flagged=false;s.decrepitate=false;s.stop=false;if(this.bubble.hasOwnProperty(r)){this.bubble[r].fire(null,s)}return s.stop};j.processingAction=function(u,r,x,w){var v=null,s;if(!(r[1].flagged||r[1].decrepitate)||w){s=r[1].anchor||r[1].button||r[1].input||r[1].select;if(s){v=this.getActionName(s,x);r[1].el=s}if(v&&(x[v].apply(r[1],[u,r]))){a.stopEvent(r[0]);r[1].flagged=true;r[1].decrepitate=true;r[1].stop=true}}};j.defaultActions={};j.addDefaultAction=function(t,s,r){if(t&&s&&(!this.defaultActions.hasOwnProperty(t)||r)){this.defaultActions[t]=s}};j.on("navigate",o);j.on("navigate",q);j.initMonitors=function(){var r=function(){var s=new YAHOO.widget.Module("yui-cms-font-monitor",{monitorresize:true,visible:false});s.render(document.body);YAHOO.widget.Module.textResizeEvent.subscribe(j.onRepaint,j,true);YAHOO.widget.Overlay.windowScrollEvent.subscribe(j.onRepaint,j,true)};if(d.isFunction(YAHOO.widget.Module)){a.onDOMReady(r,j,true)}};j.init=function(){var r=document.body;clearInterval(g);if(!this.ready){this.ready=true;YAHOO._Bubbling=YAHOO._Bubbling||{};d.augmentObject(m,YAHOO._Bubbling,true);b.addClass(r,m.classname);a.addListener(window,"resize",j.onRepaint,j,true);a.addListener(r,"click",j.onNavigate,j,true);a.addListener(r,(YAHOO.env.ua.opera?"mousedown":"contextmenu"),j.onProperty,j,true);if(YAHOO.env.ua.opera){a.addListener(r,"click",j.onProperty,j,true)}a.addListener(r,"mouseover",j.onRollOver,j,true);a.addListener(r,"mouseout",j.onRollOut,j,true);a.addListener(document,"keyup",j.onKeyPressed,j,true);a.addListener(document,"keydown",j.onKeyPressed,j,true);j.fire("ready",{module:"bubbling"})}};j.addLayer(["navigate","god","property","key","repaint","rollover","rollout","blur","focus","change","ready"]);g=setInterval(function(){try{if(d.isObject(document.body)){j.init()}}catch(r){}},a.POLL_INTERVAL);a.onDOMReady(j.init,j,true);return j}()})();YAHOO.register("bubbling",YAHOO.Bubbling,{version:"2.1",build:"234"});